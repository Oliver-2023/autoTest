# Copyright 2018 The ChromiumOS Authors
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

from autotest_lib.server import utils

NAME = "servo_USBInstall"
METADATA = {
    "contacts": ["chrome-fleet-software@google.com", "xianuowang@google.com"],
    "bug_component": "b:1032353",
    "criteria": "Force reinstall cros to a dut from the servo.",
}
TEST_TYPE = "server"
DEPENDENCIES = "servo_state:WORKING"

"""
This test will do the same thing as ServoInstallRepair does, but with out
need any trigger. It will install cros on the dut use the image from USB
that plugged into the servo.
"""

args_dict = utils.args_to_dict(args)
servo_args = hosts.CrosHost.get_servo_arguments(args_dict)

def run(machine):
    host = hosts.create_host(machine, servo_args=servo_args)
    job.run_test('servo_USBInstall', host=host)

parallel_simple(run, machines)
